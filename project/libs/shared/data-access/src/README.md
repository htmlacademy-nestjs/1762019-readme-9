# Опции метода `toObject()` в Mongoose

При вызове document.toObject() в Mongoose можно передать объект с опциями
для преобразования документа в обычный JavaScript-объект:
```
document.toObject({
  getters: true,
  versionKey: false,
  flattenObjectIds: true,
})
```

Рассмотрим параметры:
## Опции

### `getters: true`
- **Включает виртуальные геттеры** (getter-функции), определённые в схеме.
- Виртуальные поля (например, вычисляемые свойства) будут включены в результат.
- Без этой опции виртуальные поля не попадут в выходной объект.
- Mongoose автоматически добавляет виртуальное поле id (_id в базе => id в объекте)

### `versionKey: false`
- **Отключает добавление поля `__v`** (версионный ключ).
- Mongoose по умолчанию добавляет `__v` для контроля версий документа (оптимистичная блокировка).
- Полезно, если вам не нужна эта информация в конечном объекте.

### `flattenObjectIds: true`
- **Преобразует `ObjectId` в строки**.
- По умолчанию ссылки (`ref`) возвращаются как объекты `ObjectId`.
- С этой опцией они будут преобразованы в обычные строки (например, `"507f1f77bcf86cd799439011"`).
- Упрощает работу с данными, особенно при сериализации в JSON (например, для API).

## Пример

### Исходный документ (без опций)
```javascript
{
  _id: ObjectId("662a1c2e3b4e8f7d9c1b2a3c"),
  name: "John",
  __v: 3,
  someRef: ObjectId("507f1f77bcf86cd799439011")
}
```

### После toObject({ getters: true, versionKey: false, flattenObjectIds: true })
```
{
  id: "662a1c2e3b4e8f7d9c1b2a3c", // ObjectId → строка
  name: "John",
  fullName: "John Doe", // виртуальное поле
  someRef: "507f1f77bcf86cd799439011" // ObjectId → строка
  // (__v отсутствует)
}
```
